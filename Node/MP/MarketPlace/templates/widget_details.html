<section class="wdetail_wrap">
    <div class="aiv_pagetitle_boxwrap">
        <div class="container">
            <div class="store_heading">
                <h2>Widget Detail</h2>
                <p>Detailed Information of the Widget</p>
            </div>
        </div>
    </div>

    <div class="wdetail_wrapbox">
        <div class="container">            
            <div class="row wdetail_wrapbox_top">
                <div class="col-md-4 col-lg-4 col-xl-3">
                    <div class="wdtl_img_left">
                        <div class="aiv_widgetsdock_item">
                            <div class="aiv_widgetitem_title_catg">
                               {{widget.type == 'customVisualization' ? 'Custom Visualization' : widget.type | uppercase }}
                            </div>
                            <div class="aiv_widget_image">
                                <div class="aiv_widget_amntdiv">
                                    <span ng-if="widget.purchase_option.toLowerCase() == 'paid'"
                                        class="badge aiv_badge_price aiv_badge_paid">Paid</span>
                                    <span ng-if="widget.purchase_option.toLowerCase() == 'free'"
                                        class="badge aiv_badge_price aiv_badge_free">Free</span>
                                </div>
                                <img ng-src="{{widget.image !== '' ? baseUrl+'/'+widget.image : 'images/dflwidg.png' }}"
                                onerror="this.onerror=null; this.src='images/dflwidg.png'" alt="aiv-widget-image">
                            </div>
                            <div class="widg_rating_div">
                                <div class="widg_rating_div_rstars">
                                    <i ng-repeat="x in [1,2,3,4,5]" class="fa fa-star" ng-class=" x <= widget.rate ? 'fill ':'unfill'"></i>
                                    <!-- <i class="fa fill fa-star"></i>
                                    <i class="fa fill fa-star"></i>
                                    <i class="fa fill fa-star"></i>
                                    <i class="fa unfill fa-star"></i>
                                    <i class="fa unfill fa-star"></i> -->
                                </div>
                                <div class="widg_ratg_cnts">
                                    {{widget.rate}}/5
                                </div>
                            </div>
                            <div class="aiv_widgetsdock_item_desc">
                                <div class="aiv_widgetsdock_btn_div">
                                    <a href="javascript:void(0);" class="btn btn-default aivlnk_buy"
                                        ng-if="widget.purchase_option.toLowerCase() == 'paid'"
                                        ><i class="fa fa-shopping-cart"></i>Buy</a>
                                    <a  class="btn btn-default aivlnk_down"
                                        ng-if="widget.purchase_option.toLowerCase() == 'free'"
                                        href="{{baseUrl}}/{{widget.file_path}}" download><i class="fa fa-download"></i>Download</a>
                                </div>

                            </div>
                        </div>

                        <div class="widleft_ratediv">
                            <div class="aiv_rating_block">
                                <div class="aiv_rblock_lefttop">
                                    <div class="aiv_phead">Average User Rating</div>
                                    <div class="aivrblock_widg_rating_div">
                                        <div class="aivwidg_rblock_div_rstars">
                                            <i ng-repeat="x in [1,2,3,4,5]" class="fa fa-star" ng-class=" x <= widget.rate ? 'fill ':'unfill'"></i>
                                            <!-- <i class="fa fill fa-star"></i>
                                            <i class="fa fill fa-star"></i>
                                            <i class="fa fill fa-star"></i>
                                            <i class="fa unfill fa-star"></i>
                                            <i class="fa unfill fa-star"></i> -->
                                        </div>
                                        <div class="aivwidg_rblock_ratg_cnts">
                                            <span>{{widget.rate}}</span>/5
                                        </div>
                                    </div>
                                </div>

                                <hr class="hrtyp1">

                                <div class="aiv_rblock_leftbtm">
                                    <div class="aiv_phead">Rating Breakdown</div>
                                    <div class="aivrblock_widg_ratebkdwon_div">
                                        <div class="aiv_rateprg_listing_div">
                                            <div class="aivrate_prgbox">
                                                <div class="aivrate_prgbox_starlabel">
                                                    5 <i class="fa fa fill fa-star"></i>
                                                </div>
                                                <div class="aivrate_prgbox_prgdiv">
                                                    <div class="progress">
                                                        <div class="progress-bar aiv_prgbar5" role="progressbar"
                                                            style="width: 100%;" aria-valuenow="100" aria-valuemin="0"
                                                            aria-valuemax="100"></div>
                                                    </div>
                                                </div>
                                                <div class="aivrate_prgbox_prgval">
                                                    5
                                                </div>

                                            </div>
                                            <div class="aivrate_prgbox">
                                                <div class="aivrate_prgbox_starlabel">
                                                    4 <i class="fa fa fill fa-star"></i>
                                                </div>
                                                <div class="aivrate_prgbox_prgdiv">
                                                    <div class="progress">
                                                        <div class="progress-bar aiv_prgbar4" role="progressbar"
                                                            style="width: 80%;" aria-valuenow="80" aria-valuemin="0"
                                                            aria-valuemax="100"></div>
                                                    </div>
                                                </div>
                                                <div class="aivrate_prgbox_prgval">
                                                    4
                                                </div>

                                            </div>
                                            <div class="aivrate_prgbox">
                                                <div class="aivrate_prgbox_starlabel">
                                                    3 <i class="fa fa fill fa-star"></i>
                                                </div>
                                                <div class="aivrate_prgbox_prgdiv">
                                                    <div class="progress">
                                                        <div class="progress-bar aiv_prgbar3" role="progressbar"
                                                            style="width: 60%;" aria-valuenow="60" aria-valuemin="0"
                                                            aria-valuemax="100"></div>
                                                    </div>
                                                </div>
                                                <div class="aivrate_prgbox_prgval">
                                                    15
                                                </div>

                                            </div>
                                            <div class="aivrate_prgbox">
                                                <div class="aivrate_prgbox_starlabel">
                                                    2 <i class="fa fa fill fa-star"></i>
                                                </div>
                                                <div class="aivrate_prgbox_prgdiv">
                                                    <div class="progress">
                                                        <div class="progress-bar aiv_prgbar2" role="progressbar"
                                                            style="width: 40%;" aria-valuenow="40" aria-valuemin="0"
                                                            aria-valuemax="100"></div>
                                                    </div>
                                                </div>
                                                <div class="aivrate_prgbox_prgval">
                                                    5
                                                </div>

                                            </div>
                                            <div class="aivrate_prgbox">
                                                <div class="aivrate_prgbox_starlabel">
                                                    1 <i class="fa fa fill fa-star"></i>
                                                </div>
                                                <div class="aivrate_prgbox_prgdiv">
                                                    <div class="progress">
                                                        <div class="progress-bar aiv_prgbar1" role="progressbar"
                                                            style="width: 20%;" aria-valuenow="20" aria-valuemin="0"
                                                            aria-valuemax="100"></div>
                                                    </div>
                                                </div>
                                                <div class="aivrate_prgbox_prgval">
                                                    5
                                                </div>

                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>

                    </div>
                </div>
                <div class="col-md-8 col-lg-8 col-xl-9">
                    <div class="wdtl_desc_right">
                        <div ng-if="isAdmin" class="aiv_opercond_div">
                            <button type="button" ng-click="goNext();"
                                class="aiv_cmnbtn_outline_sbtn_orange btn btn-outline-primary"><i class="fa fa-edit"></i></button>
                            <button type="button"  ng-click="deleteWidget();"
                                class="aiv_cmnbtn_outline_cancel btn btn btn-outline-primary"><i class="fa fa-trash"></i></button>
                        </div>
                        <div class="aiv_widgetsdock_item_desc">
                            <p class="wid_nm">{{widget.title}}</p>
                            <p class="wid_owner">Seller:- {{widget.seller_name}}</p>
                            <p ng-if="widget.purchase_option.toLowerCase()!= 'free'" class="wid_price">Price:- <i class="fa fa-dollar"></i>{{widget.price}}</p>

                            <div class="aiv_wid_item_dtl_list">
                                <ul class="list-unstyled awid_dlist">
                                    <li data-widgconfgs="Size">
                                        <i class="fa fa-database"></i> {{widget.size | Filesize}}
                                    </li>
                                    <li data-widgconfgs="Downloads">
                                        <i class="fa fa-download"></i> {{widget.downloaded}}
                                    </li>
                                    <li data-widgconfgs="Version">
                                        <i class="fa fa-refresh"></i> {{widget.refresh}}
                                    </li>
                                    <li data-widgconfgs="Comments">
                                        <i class="fa fa-comment-o"></i> {{widget.comments}}
                                    </li>

                                </ul>
                            </div>
                            <div ng-if="widget.details != '' && widget.details != null && widget.details != undefined"
                                class="aiv_wid_item_sml_desc">
                                <div class="aiv_phead">Widget Detail</div>
                                <p ng-repeat="n in widget.details.split('\n')">{{n}}</p>
                                <!-- <p>Donec eget ornare nibh tiam laoreet enim id volutpat gravidas uspendisse potentii
                                    nteger malesuada
                                    tristique faucibused in libero eget neque aliquam gravida a sit amet dolor.</p>
                                <p>Quisque tincidunt velit non dolor tristique consectetur onec nec dapibus velit, vitae
                                    aliquet velit
                                    isque fermentum sed augue et vulputate.</p> -->
                            </div>

                            <div ng-if="widget.features != '' && widget.features != null && widget.features != undefined"
                                class="aiv_wid_item_sml_desc">
                                <div class="aiv_phead">Widget Features</div>
                                <ul class="list-unstyled aiv_wid_item_list_desclist">
                                    <li ng-repeat="n in widget.features.split('\n')">{{n}}</li>
                                    <!-- <li>Pellentesque vel dolor euismod, finibus ante id, rhoncus velit hasellus nec
                                        dolor vulputate,
                                        finibus odio non, egestas augue.</li>
                                    <li>Phasellus nec dolor vulputate, finibus odio non, egestas augue.</li>
                                    <li>Duis vestibulum erat euismod magna volutpat, nec dictum nunc eleifend.</li> -->

                                </ul>
                            </div>
                            <div class="aiv_wid_item_sml_desc" style="display: none;">
                                <div class="aiv_phead">Widget Gallery</div>
                                <div class="aiv_widg_gallerydiv">
                                    <ul ng-init="galleryInit()" class="aiv_widg_gallerydivlist list-unstyled">
                                        <li>
                                            <a href="images/dflwidg.png" data-fancybox="aivwidg_images">
                                              <img src="images/dflwidg.png" class="img-thumbnail" alt="aiv-widget-image" />
                                            </a>
                                        </li>
                                        <li>
                                            <a href="images/dflwidg.png" data-fancybox="aivwidg_images">
                                              <img src="images/dflwidg.png" class="img-thumbnail" alt="aiv-widget-image" />
                                            </a>
                                        </li>
                                        <li>
                                            <a href="images/dflwidg.png" data-fancybox="aivwidg_images">
                                              <img src="images/dflwidg.png" class="img-thumbnail" alt="aiv-widget-image" />
                                            </a>
                                        </li>
                                        <li>
                                            <a href="images/dflwidg.png" data-fancybox="aivwidg_images">
                                              <img src="images/dflwidg.png" class="img-thumbnail" alt="aiv-widget-image" />
                                            </a>
                                        </li>
                                        <li>
                                            <a href="images/dflwidg.png" data-fancybox="aivwidg_images">
                                              <img src="images/dflwidg.png" class="img-thumbnail" alt="aiv-widget-image" />
                                            </a>
                                        </li>
                                    </ul>  
                                </div>
                            </div>
                            <div ng-if="widget.video_url != '' && widget.video_url != undefined && widget.video_url != null"
                                class="aiv_wid_item_sml_desc">
                                <div class="aiv_phead">Widget Video </div>
                                <div class="aiv_video_addiv">
                                    <div ng-init="videoInit(widget.video_url)" class="embed-responsive embed-responsive-16by9">
                                        <iframe class="embed-responsive-item" allowfullscreen></iframe>
                                    </div>

                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>

            <div ng-if="user != undefined" class="row wdetail_wrapbox_middle">
                <div class="col-xl-12">
                    <div class="wdetailsbt_makeacmntdiv">
                        <button class="btn btn-primary mkclnkbtn" type="button" data-toggle="collapse"
                            data-target="#cmntcollapsediv" aria-expanded="false" aria-controls="collapseExample">
                            Make A Comment
                        </button>

                    </div>
                </div>
            </div>

            <div ng-if="user != undefined" class="row wdetail_wrapbox_bottom collapse" id="cmntcollapsediv">
                <div class="col-xl-12">
                    <div class="wdtl_commentinner_boxdiv">
                        <div class="wdtl_commentbox">
                            <div class="aiv_phead">Review</div>
                            <div class="wcmnt_ipdiv mainaivfrmgrp_wrap">
                                <div class="aiv_mcmntdiv_box">
                                    <div class="form-group">
                                        <label>Write your comments</label>
                                        <textarea ng-model="comment" class="form-control tarea" rows="3"></textarea>
                                    </div>
                                </div>
                            </div>
                        </div>
                        <div class="wdtl_ratebox">
                            <div class="aiv_phead">Rating</div>
                            <div class="aiv_rtgdiv">
                                <span ng-repeat="star in starRating" ng-click="addStarRating($index)"
                                    ng-class="{'st-rating':star.rating == 1}" class="fa fa-star"></span>
                            </div>
                        </div>
                        <div class="wdt_cmntfoot_btn_div">
                            <button type="button" ng-click="makeComment(comment);"
                                class="btn_cmntft btn_sbtn btn btn-primary">Submit</button>
                            <button type="button" ng-click="clear()"
                                class="btn_cmntft btn_cncl btn btn-primary">Cancel</button>
                        </div>
                    </div>
                </div>
            </div>

            <div class="row wdetail_cmntlist_box">

                <div class="col-xl-12">
                    <div class="wdtl_commentinner_listingboxdiv">
                        <div class="aiv_phead">Comments</div>
                        <p class="aiv_no_cmnts" ng-if="widgetComments.length == 0">No comments posted yet.</p>
                        <div class="wdtl_commentinner_listings" ng-if="widgetComments.length > 0 ">                            
                            <div ng-init="mScrollinit()" class="media cmnt_media_div" ng-repeat="w in widgetComments">
                                <img src="https://via.placeholder.com/50x50"
                                    class="img-thumbnail rounded-circle align-self-start mr-3 cmnt_per_img" alt="...">
                                <div class="media-body">

                                    <p class="cmnt_aivuser">{{w.username}}</p>
                                    <div class="widg_rating_div">
                                        <div class="widg_rating_div_rstars">
                                            <i ng-repeat="x in [1,2,3,4,5]" class="fa fa-star" ng-class=" x <= w.rate_count ? 'fill ':'unfill'"></i>
                                            <!-- <i class="fa fill fa-star"></i>
                                            <i class="fa fill fa-star"></i>
                                            <i class="fa unfill fa-star"></i>
                                            <i class="fa unfill fa-star"></i> -->
                                        </div>
                                        <div class="widg_ratg_cnts">
                                            {{w.rate_count}}/5
                                        </div>
                                    </div>
                                    <p class="cmnt_aivusercmntdisp">{{w.comment}}</p>
                                    <p class="cmnt_aivuser_timestamp"><small class="mt-0"><i class="fa fa-clock-o"></i>
                                            {{w.date}}</small></p>
                                </div>
                            </div>

                            <!-- <div class="media cmnt_media_div">
                                <img src="https://via.placeholder.com/50x50"
                                    class="img-thumbnail rounded-circle align-self-start mr-3" alt="...">
                                <div class="media-body">

                                    <p class="cmnt_aivuser">Username</p>
                                    <div class="widg_rating_div">
                                        <div class="widg_rating_div_rstars">
                                            <i class="fa fill fa-star"></i>
                                            <i class="fa fill fa-star"></i>
                                            <i class="fa fill fa-star"></i>
                                            <i class="fa unfill fa-star"></i>
                                            <i class="fa unfill fa-star"></i>
                                        </div>
                                        <div class="widg_ratg_cnts">
                                            3/5
                                        </div>
                                    </div>
                                    <p class="cmnt_aivusercmntdisp">Donec eget ornare nibh tiam laoreet enim id volutpat
                                        gravidas uspendisse potentii nteger malesuada tristique faucibused.</p>
                                    <p class="cmnt_aivuser_timestamp"><small class="mt-0"><i class="fa fa-clock-o"></i>
                                            Nov 26, 2019 12:53</small></p>
                                </div>
                            </div> -->



                        </div>
                    </div>
                </div>

            </div>



            <div class="wdetail_otherwidgets_box">
                <div class="aiv_smn_title_typ1">
                    <div class="aiv_smn_title_inner">
                        <div class="store_heading">
                            <h2>Other Widgets</h2>
                        </div>
                        <p>Below are the widgets from the same user, have a look at those widgets</p>
                    </div>
                    <a class="aiv_emore_lnk" href="javascript:void(0);">Explore More</a>
                </div>


                <div class="row wdetail_otherwidgets_inner">
                    <div class="col-md-12">
                        <data-owl-carousel class="owl-carousel owl-theme" data-options="options">
                            <div owl-carousel-item="" ng-repeat="n in widgets | filter: otherWidgets" class="item">
                                <div class="aiv_widgetsdock_item">
                                    <div class="aiv_widgetitem_title_catg">
                                        {{n.type == 'customVisualization' ? 'Custom Visualization' : n.type | uppercase }}
                                    </div>
                                    <div class="aiv_widget_image">
                                        <div class="aiv_widget_amntdiv">
                                            <span ng-if="n.purchase_option.toLowerCase() == 'free'" class="badge aiv_badge_price aiv_badge_free">Free</span>
                                            <span ng-if="n.purchase_option.toLowerCase() == 'paid'" class="badge aiv_badge_price aiv_badge_paid">Paid</span>
                                        </div>
                                        <img ng-src="{{n.image !== '' ? baseUrl+'/'+n.image : 'images/dflwidg.png' }}"
                                            onerror="this.onerror=null; this.src='images/dflwidg.png'"
                                            alt="aiv-widget-image">
                                    </div>
                                    <div class="aiv_widgetsdock_item_desc">
                                        <p class="wid_nm">{{n.title}}</p>
                                        <div class="widg_rating_div">
                                            <div class="widg_rating_div_rstars">
                                                <i ng-repeat="x in [1,2,3,4,5]" class="fa fa-star" ng-class=" x <= n.rate ? 'fill ':'unfill'"></i>
                                                <!-- <i class="fa fill fa-star"></i>
                                                <i class="fa fill fa-star"></i>
                                                <i class="fa fill fa-star"></i>
                                                <i class="fa unfill fa-star"></i>
                                                <i class="fa unfill fa-star"></i> -->
                                            </div>
                                            <div class="widg_ratg_cnts">
                                                {{n.rate}}/5
                                            </div>
                                        </div>
                                        <div class="aiv_wid_item_dtl_list">
                                            <ul class="list-unstyled awid_dlist">
                                                <li>
                                                    <i class="fa fa-database"></i> {{n.size | Filesize}}
                                                </li>
                                                <li>
                                                    <i class="fa fa-download"></i> {{n.downloaded}}
                                                </li>
                                                <li>
                                                    <i class="fa fa-refresh"></i> {{n.refresh}}
                                                </li>
                                                <li>
                                                    <i class="fa fa-comment-o"></i> {{n.no_of_comments}}
                                                </li>

                                            </ul>
                                        </div>
                                        <div class="aiv_wid_item_sml_desc">
                                            <p>{{n.description}}</p>
                                        </div>
                                        <div class="aiv_widgetsdock_btn_div">
                                            <a class="btn btn-default aivlnk_prv" href="#!widget_details/{{n.id}}"><i
                                                    class="fa fa-eye"></i>Preview</a>
                                             <a class="btn btn-default aivlnk_down" href="{{baseUrl}}/{{n.file_path }}" download><i
                                                    class="fa fa-download"></i>Download</a>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </data-owl-carousel>
                    </div>
                </div>
            </div>
        </div>
    </div>
</section>

